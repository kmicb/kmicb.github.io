<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Concertos of Chaos">
    <meta property="og:description" content="A Deaf Pianist Orchestrates Raw Mental Health Conversations Uncensored, Unedited, Unapologetic">
    <meta property="og:image" content="https://concertosofchaos.com/sm_logo_color.png">
    <meta property="og:url" content="https://concertosofchaos.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Concertos of Chaos">
    <meta name="twitter:description" content="A Deaf Pianist Orchestrates Raw Mental Health Conversations Uncensored, Unedited, Unapologetic">
    <meta name="twitter:image" content="https://concertosofchaos.com/sm_logo_color.png">
    <title>Concertos of Chaos</title>
    <style>
        :root {
            /* changes episode title and podcast title text color */
            --primary-color: #000000;
            /* changes all text except the "Like my podcast?" line */
            --secondary-color: #000000;
            /* changes nav buttons color */
            --accent-color: #000000;
            /* ##### changes entire page background color except boxes ##### */
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: url('03_rainbow_galaxy.png') no-repeat center top fixed;
            /* have background "zoom" when window size adjusted */
            line-height: 1.6;
        }

        /* header box and support podcast box */
        .standard-box {
            text-align: center;
            margin-bottom: 1em;
            padding: 1em;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            border: 1px solid black;
            min-height: 275px;
        }

        .download-button:disabled {
          pointer-events: none;
        }

        .podcast-title {
            font-size: 2.5em;
            color: var(--primary-color);
            /* margin-bottom: 0.5em; */
            width: 70%
        }

        .podcast-description {
            color: var(--secondary-color);
            font-size: 1.2em;
            margin-bottom: 1em;
        }
        
        .episode {
            margin-bottom: 1.5em;
            padding: 1.5em;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            background-color: white;
            border: 2px solid #e2e8f0;
        }

        .episode-image {
            float: right;
            width: 150px;
            height: auto;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-left: 1.5em;
        }

        .episode h2 {
            color: var(--primary-color);
            margin: 0 0 0.5em 0;
            font-size: 1.4em;
        }

        .episode-meta {
            color: var(--secondary-color);
            font-size: 0.9em;
            margin-bottom: 1em;
        }

        .episode-description {
            color: var(--secondary-color);
            margin-bottom: 1em;
        }

        .download-links {
            display: flex;
            gap: 1em;
            margin-top: 1em;
            justify-content: flex-start;
        }

        .download-button {
            display: inline-flex;
            align-items: center;
            padding: 0.5em 1em;
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }

        .download-button:hover {
            background-color: #000000;
        }

        .episode-type {
            display: inline-block;
            padding: 0.25em 0.5em;
            background-color: #e2e8f0;
            border-radius: 4px;
            margin-right: 0.5em;
            font-size: 0.8em;
        }

        .episode-duration {
            margin-left: 1em;
        }

        .header-image {
            width: 35%;
            height: auto;
            display: block;
            margin: 1em auto 0;
            border-radius: 8px;
        }

        /* venmo image */
        .top-right-image {
            width: 175px;
            height: auto;
            border-radius: 8px;
            display: block;
            margin: 1em auto 0;
            padding-bottom: 0;
        }

        .image-text-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 0;
        }

        .image-text-container p {
            /* margin: 0; */
            font-size: 1.2em;
            color: var(--primary-color);
            text-align: center;
        }

        /* Responsive styling for mobile devices */
    @media screen and (max-width: 768px) {
        .header-image {
            width: 90%;  /* Slightly narrower on mobile */
            max-height: 200px;  /* Limit height on mobile */
            object-fit: contain;  /* Maintain aspect ratio */
        }

        .top-right-image {
            width: 90%;  /* Slightly narrower on mobile */
            max-height: 200px;  /* Limit height on mobile */
            object-fit: contain;  /* Maintain aspect ratio */
            margin: 1em auto 0;  /* Center the image on mobile */
        }

        .image-text-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 2em;
        }

        .image-text-container img {
            margin-top: 1em;
        }
    }
    </style>
</head>
<body>
    <!-- Navigation bar -->
    <nav class="nav-tab">
    </nav>
    <style>
    .nav-tab {
        min-width: 120px;
        text-align: center;
        justify-content: center;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1em;
        padding: 1em 0;
        margin-bottom: 1em;
    }
    @media (max-width: 600px) {
        .nav-tab {
            flex-direction: column;
        }
        .nav-tab a {
            margin-bottom: 0.5em;
        }
    }
    </style>
    <header class="standard-box">
        <!-- top box, title "Concertos of Chaos" -->
        <img src="logo_data/horizontal_color.png" class="podcast-title">
        <div class="podcast-description"><b>A Deaf Pianist Orchestrates Raw Mental Health Conversations Uncensored, Unedited, Unapologetic</b></div>
    </header>

    <main id="episodes-container"></main>

    <script>
        // color defs for individual episode
        const episodeColors = [
            { background: '#ffffff', border: '#000000', button: '#f7d61d' }, // Episode 8   Yellow
            { background: '#ffffff', border: '#000000', button: '#f45c27' }, // Episode 7   Orange
            { background: '#ffffff', border: '#000000', button: '#cc1b6a' }, // Episode 6   Red
            { background: '#ffffff', border: '#000000', button: '#6c44c8' }, // Episode 5   Violet
            { background: '#ffffff', border: '#000000', button: '#1179e5' }, // Episode 4   Blue
            { background: '#ffffff', border: '#000000', button: '#5bc62e' }, // Episode 3   Green
            { background: '#ffffff', border: '#000000', button: '#f7d61d' }, // Episode 2b  Yellow
            { background: '#ffffff', border: '#000000', button: '#f45c27' }, // Episode 2   Orange
            { background: '#ffffff', border: '#000000', button: '#cc1b6a' }, // Episode 1   Red
        ];

        function startCountdown(targetTime, countdownElement, downloadButton, item) {
          function updateCountdown() {
            const now = new Date();
            const timeLeft = targetTime.getTime() - now.getTime();
    
            if (timeLeft <= 0) {
              console.log("Countdown ended. Showing button.");
              downloadButton.innerText = 'Play Episode';
              downloadButton.disabled = false; // Make the button clickable
              downloadButton.href = item.getElementsByTagNameNS('*', 'enclosure')[0]?.getAttribute('url');
              clearInterval(timer);
            } else {
              const hours = Math.floor(timeLeft / (1000 * 60 * 60));
              const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
              const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
    
              downloadButton.innerText = `${hours}h ${minutes}m ${seconds}s`;
              downloadButton.disabled = true; // Keep the button disabled until the countdown ends
            }
          }
          
          updateCountdown(); // Initial call
          const timer = setInterval(updateCountdown, 1000); // Update every second
        }
    
        async function fetchAndDisplayPodcast() {
          try {
            const response = await fetch('rss.xml');
            const text = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(text, 'text/xml');
    
            const items = xmlDoc.getElementsByTagName('item');
            const episodesContainer = document.getElementById('episodes-container');
    
            Array.from(items).forEach((item, index) => {
              const itunesNS = 'http://www.itunes.com/dtds/podcast-1.0.dtd';
              const title = item.getElementsByTagNameNS('*', 'title')[0]?.textContent;
              const description = item.getElementsByTagNameNS('*', 'description')[0]?.textContent.trim();
              const pubDateStr = item.getElementsByTagNameNS('*', 'pubDate')[0]?.textContent;
              const releaseTime = new Date(pubDateStr);
              const timezoneOffset = releaseTime.getTimezoneOffset() * 60 * 1000;
              const adjustedReleaseTime = new Date(releaseTime.getTime() + timezoneOffset);

              const episodeDiv = document.createElement('div');
              episodeDiv.className = 'episode';
              
              // Apply colors for this episode (fallback to default if not enough colors defined)
              const colorIndex = index < episodeColors.length ? index : index % episodeColors.length;
              const colors = episodeColors[colorIndex];
              
            //   episodeDiv.style.backgroundColor = colors.background;
              if (colors.background.startsWith('url')) {
                episodeDiv.style.backgroundImage = colors.background;
                episodeDiv.style.backgroundSize = 'cover';
                episodeDiv.style.backgroundRepeat = 'no-repeat';
                episodeDiv.style.backgroundPosition = 'center';
              }
              episodeDiv.style.borderColor = colors.border;
              
              // ##### episode image url #####
              // <img src="logo_color.png" alt="${title}" class="episode-image">
              episodeDiv.innerHTML = `
                <div class="episode-content">
                  <h2>${title}</h2>
                  <div class="episode-meta">
                    ${item.getElementsByTagNameNS(itunesNS, 'season')[0]?.textContent ? `Season ${item.getElementsByTagNameNS(itunesNS, 'season')[0]?.textContent}` : ''}
                    ${item.getElementsByTagNameNS(itunesNS, 'episode')[0]?.textContent ? `Episode ${item.getElementsByTagNameNS(itunesNS, 'episode')[0]?.textContent}` : ''}
                    <span class="episode-duration">${item.getElementsByTagNameNS('*', 'duration')[0]?.textContent}</span>
                    <div>${new Date(pubDateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</div>
                  </div>
                  <div class="episode-description">${description}</div>
                </div>
              `;
    
              const enclosures = item.getElementsByTagNameNS('*', 'enclosure');
              const mediaButtons = document.createElement('div');
              mediaButtons.className = 'download-links';
    
              Array.from(enclosures).forEach(enclosure => {
                  const type = enclosure.getAttribute('type');
                  const url = enclosure.getAttribute('url');
                  
                  if (url) {
                      const button = document.createElement('a');
                      button.href = url;
                      button.className = 'download-button';
                      
                      // Apply the button color for this episode
                      button.style.backgroundColor = colors.button;
                      button.style.color = '#000000';
                      button.style.fontWeight = 'bold';
                      
                      // Set button text based on media type
                      if (type.includes('video')) {
                          button.innerText = 'Play Video';
                      } else if (type.includes('audio')) {
                          button.innerText = 'Play Audio';
                      }
    
                      if (new Date() < releaseTime) {
                          button.removeAttribute('href');
                          startCountdown(releaseTime, null, button, item);
                      } else {
                          button.disabled = false;
                      }
    
                      mediaButtons.appendChild(button);
                  }
              });
    
              episodeDiv.appendChild(mediaButtons);
    
              episodesContainer.appendChild(episodeDiv);
            });
          } catch (error) {
            console.error('Error fetching podcast feed:', error);
            document.getElementById('episodes-container').innerHTML = '<p>Error loading podcast episodes. Please try again later.</p>';
          }
        }
    
        document.addEventListener('DOMContentLoaded', fetchAndDisplayPodcast);
      </script>

      <div class="standard-box">
        <div class="image-text-container">
          Like my podcast? You can support me! (if you want)
          <img src="venmo.jpeg" alt="Venmo QR" class="top-right-image">
        </div>
      </div>
    <center><img src="palestine.jpg" alt="Palestine Flag" class="header-image"></center>

  <footer class="footer" style="text-align: center; padding: 1em 0; background-color: var(--background-color); border-color: black;">
    &copy; <b>2025 Concertos of Chaos. All rights reserved.</b>
  </footer>    
</body>
</html>